# Iris

åˆ†å¸ƒå¼æœåŠ¡å™¨æ¢é’ˆç³»ç»Ÿï¼Œä½¿ç”¨ Rust + gRPC å®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ å•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ”¯æŒ Agent å’Œ Server ä¸¤ç§è¿è¡Œæ¨¡å¼
- ğŸ“Š å®æ—¶é‡‡é›†ç³»ç»ŸæŒ‡æ ‡ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€è¿›ç¨‹
- ğŸ”„ åŸºäº gRPC çš„é«˜æ•ˆé€šä¿¡
- ğŸ’¾ å†…å­˜å­˜å‚¨ï¼ˆå¯æ‰©å±•ä¸ºæ•°æ®åº“ï¼‰

## å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘

```bash
cargo build --release
```

### è¿è¡Œ Serverï¼ˆä¸­å¿ƒæœåŠ¡å™¨ï¼‰

```bash
./target/release/iris server --addr 0.0.0.0:50051
```

### è¿è¡Œ Agentï¼ˆè¢«ç›‘æ§æœåŠ¡å™¨ï¼‰

```bash
./target/release/iris agent --server http://your-server:50051 --interval 10
```

## å‘½ä»¤è¡Œå‚æ•°

### Server æ¨¡å¼

```bash
iris server [OPTIONS]

Options:
  -a, --addr <ADDR>  ç›‘å¬åœ°å€ [default: 0.0.0.0:50051]
  -h, --help         æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### Agent æ¨¡å¼

```bash
iris agent [OPTIONS]

Options:
  -s, --server <SERVER>      Server åœ°å€ [default: http://127.0.0.1:50051]
  -i, --interval <INTERVAL>  ä¸ŠæŠ¥é—´éš”ï¼ˆç§’ï¼‰ [default: 10]
  -h, --help                 æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

## é¡¹ç›®ç»“æ„

```
iris/
â”œâ”€â”€ src/main.rs           # ä¸»å…¥å£
â”œâ”€â”€ proto/                # gRPC åè®®å®šä¹‰
â”œâ”€â”€ agent/                # Agent æ¨¡å—
â”‚   â”œâ”€â”€ lib.rs
â”‚   â””â”€â”€ collector.rs      # ç³»ç»ŸæŒ‡æ ‡é‡‡é›†
â”œâ”€â”€ server/               # Server æ¨¡å—
â”‚   â”œâ”€â”€ lib.rs
â”‚   â””â”€â”€ storage.rs        # æ•°æ®å­˜å‚¨
â””â”€â”€ common/               # å…±äº«ä»£ç 
    â””â”€â”€ lib.rs            # Proto å®šä¹‰å’Œå·¥å…·å‡½æ•°
```

## é‡‡é›†çš„æŒ‡æ ‡

- **CPU**: ä½¿ç”¨ç‡ã€æ ¸å¿ƒæ•°ã€æ¯æ ¸ä½¿ç”¨ç‡ã€è´Ÿè½½å‡è¡¡
- **å†…å­˜**: æ€»é‡ã€å·²ä½¿ç”¨ã€å¯ç”¨ã€Swap
- **ç£ç›˜**: æŒ‚è½½ç‚¹ã€å®¹é‡ã€ä½¿ç”¨ç‡ã€è¯»å†™å­—èŠ‚æ•°
- **ç½‘ç»œ**: å‘é€/æ¥æ”¶å­—èŠ‚æ•°ã€åŒ…æ•°ã€é”™è¯¯æ•°
- **è¿›ç¨‹**: Top 10 è¿›ç¨‹çš„ CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µ

## å¼€å‘

```bash
# è¿è¡Œæµ‹è¯•
cargo test

# æ£€æŸ¥ä»£ç 
cargo clippy

# æ ¼å¼åŒ–ä»£ç 
cargo fmt
```

## TODO

- [ ] æ·»åŠ  HTTP API ç”¨äºæŸ¥è¯¢æŒ‡æ ‡
- [ ] æŒä¹…åŒ–å­˜å‚¨ï¼ˆPostgreSQL/InfluxDBï¼‰
- [ ] Web UI å±•ç¤º
- [ ] å‘Šè­¦åŠŸèƒ½
- [ ] å¤š Agent ç®¡ç†
